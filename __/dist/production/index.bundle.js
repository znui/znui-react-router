(function(t,e){for(var n in e)t[n]=e[n]})(this,function(n){var o={};function r(t){if(o[t]){return o[t].exports}var e=o[t]={i:t,l:false,exports:{}};n[t].call(e.exports,e,e.exports,r);e.l=true;return e.exports}r.m=n;r.c=o;r.d=function(t,e,n){if(!r.o(t,e)){Object.defineProperty(t,e,{enumerable:true,get:n})}};r.r=function(t){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(t,"__esModule",{value:true})};r.t=function(e,t){if(t&1)e=r(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n};r.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};r.d(t,"a",t);return t};r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};r.p="";return r(r.s=2)}([function(t,e){(function(){t.exports=this["React"]})()},function(t,e,n){t.exports={Error404:n(8)}},function(t,e,n){n(3);t.exports={HashRouter:n(4),Route:n(9)}},function(t,e){t.exports=zn.Class({static:true,methods:{init:function t(){this.fixWindowHashChange()},fixWindowHashChange:function t(){if(!window.HashChangeEvent){(function(){var e=document.URL;window.addEventListener("hashchange",function(t){Object.defineProperty(t,"oldURL",{enumerable:true,configurable:true,value:e});Object.defineProperty(t,"newURL",{enumerable:true,configurable:true,value:document.URL});e=document.URL})})()}}}})},function(t,e,n){var o=znui.React||n(0);var r=n(5);var s=n(1);t.exports=o.createClass({displayName:"ZRHashRouter",getInitialState:function t(){return{Component:null,ComponentProps:null}},componentDidMount:function t(){this.__initHandler()},__initHandler:function t(){this._handler=new r(this.props,{hashchange:this.__hashchange,handler:this.__handler,request:this.__request,notfound:this.__notfound,pluginloaded:this.__pluginLoaded});this.props.onInitHandler&&this.props.onInitHandler(this._handler,this)},__hashchange:function t(e,n){this.props.onHashChange&&this.props.onHashChange(n,this)},__handler:function t(e,n,o){this.props.onHandler&&this.props.onHandler(n,o,this)},__request:function t(e,n,o){this.setState({Component:o.component,ComponentProps:zn.extend({},o.props,{application:this.props.application,request:n,router:this,route:o})});this.props.onRequest&&this.props.onRequest(n,o,this)},__notfound:function t(e,n){this.notfound(n);this.props.onNotFound&&this.props.onNotFound(n,this)},__pluginLoaded:function t(e,n){this.props.onPluginLoaded&&this.props.onPluginLoaded(n,this)},push:function t(){},forward:function t(){},notfound:function t(e){this.setState({Component:s.Error404,ComponentProps:{request:e}})},render:function t(){return o.createElement("div",{className:znui.react.classname("zr-hash-router",this.props.className),style:this.props.style},this.state.Component&&o.createElement(this.state.Component,this.state.ComponentProps))}})},function(t,e,n){function o(t){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}var r=n(6);t.exports=zn.Class(r,{events:["hashchange","handler"],properties:{},methods:{init:function t(e,n){this.__initEvents(n);if(this["super"].caller){this["super"](e)}else{this.constructor._super_.prototype.init(e,n)}if(this._main.length&&!location.hash){location.hash=this._main.pop()}else{this.__hashchange()}window.addEventListener("hashchange",this.__hashchange.bind(this),false)},__initEvents:function t(e){if(e&&o(e)=="object"){for(var n in e){this.on(n,e[n],this)}}},__hashchange:function t(e){var n=this.fire("hashchange",e);if(n===false)return false;var o=this.__parseHash(),r=this.createRequest(o,e);n=this.fire("handler",e,o);if(n===false)return false;this.doRequest(r)},__parseHash:function t(){var e=location.hash,n=location.search,o=e.indexOf("?");if(n&&n.indexOf("?")!==-1){n=n.replace("?","")}if(o!==-1){n=n+"&"+e.substring(o+1);e=e.substring(0,o)}return{path:e.substring(1),search:zn.querystring.parse(n)}}}})},function(t,e,n){function o(t){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}var r=n(7);t.exports=zn.Class({events:["request","notfound","pluginLoaded"],properties:{requests:null,routes:null,main:null},methods:{init:function t(e,n){this._requests=[];this._routes=[];this._main=[];this._matcher=new r(e,{pluginLoaded:function(t,e){this.fire("pluginLoaded",e)}.bind(this)});this.__initEvents(n);this.loadPlugins(e.plugins);this.loadRoutes(e.routes);if(e.main){this._main.push(e.main)}},__initEvents:function t(e){if(e&&o(e)=="object"){for(var n in e){this.on(n,e[n],this)}}},createRequest:function t(e,n){e.event=n;return this._requests.push(e),e},doRequest:function t(e){var n=this._matcher.getRouteForRequest(e,this._routes);e.matcher=this._matcher;if(n){this.fire("request",e,n)}else{this.fire("notfound",e)}},loadPlugins:function t(e){var n=e||[];switch(zn.type(e)){case"string":n=[e];break;case"function":n=e(this);break}if(n&&n.length){e.forEach(function(t){this.loadPlugin(t)}.bind(this))}return this},loadPlugin:function t(e){var n=e||{};switch(zn.type(e)){case"object":n=n;break;case"function":n=n(this);break}if(n.main){this._main.push(n.main)}var o=this._matcher.formatRoutes(n.routes||[]);n.__routes__=o;this.fire("pluginLoaded",n);return this._routes=this._routes.concat(o),o},loadRoutes:function t(e){var n=this._matcher.formatRoutes(e);return this._routes=this._routes.concat(n),n},loadRoute:function t(e){this._routes.push(this._matcher.formatRoute(e))}}})},function(t,e){function o(t){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){o=function t(e){return typeof e}}else{o=function t(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}}return o(t)}t.exports=zn.Class({events:["pluginLoading","pluginLoaded","routeLoading","routeLoaded"],properties:{pathSeparator:null,pathParameterSymbol:null},methods:{init:function t(e,n){this.__initEvents(n);this._pathSeparator=e.pathSeparator||"/";this._pathParameterSymbol=e.pathParameterSymbol||":"},__initEvents:function t(e){if(e&&o(e)=="object"){for(var n in e){this.on(n,e[n],this)}}},formatRoute:function t(e,n){var o=this.fire("routeLoading",e,n);if(o===false){return}if(n){e.__parent__=n}e.paths=this.__parseRoutePaths(e.path);e.props=zn.extend({},e.props);if(e.exact==null&&e.path.indexOf(this._pathParameterSymbol)===-1){e.exact=true}return this.fire("routeLoaded",e),e},formatRoutes:function t(e,n){var o=this;switch(zn.type(e)){case"object":var r=[];for(var s in e){r.push(this.__loadPathAndComponent(s,e[s],n))}return r;case"array":return e.map(function(t){return o.formatRoute(t,n)});case"function":return this.formatRoutes(e.call(null,n,this),n)}},getRouteForRequest:function t(e,n){var o=n,r=null,s=null;for(var i=0,a=o.length;i<a;i++){r=o[i];s=this.__matchRouteAndRequest(r,e);if(s){break}}if(!s||!r){return}return e.params=s,r},getRoutesFromRoute:function t(e){var n=[],o=e.component;if(e.routes){n=this.formatRoutes(e.routes,e)}if(e.plugins){var r=this.__loadPlugins(e.plugins,e);n=n.concat(r.routes);if(!o&&r.main.length){o=r.main.pop()}}return{routes:n,component:o}},__isReactComponent:function t(e){if(e&&zn.is(e,"function")&&(e.prototype.render||e.displayName||e.prototype.isReactComponent)){return true}return false},__loadPathAndComponent:function t(e,n,o){var r={path:e};switch(zn.type(n)){case"string":r.component=zn.path(window,n);break;case"function":if(!this.__isReactComponent(n)){r.component=n.call(this,e,this)}else{r.component=n}break;case"object":zn.extend(r,n);if(r.extension!==false){this.__initRoute(r)}break}return this.formatRoute(r,o)},__initRoute:function t(e){if(e.routes){e.__routes__=this.formatRoutes(e.routes,e)}if(e.plugins){var n=this.__loadPlugins(e.plugins,e);if(e.__routes__){e.__routes__=e.__routes__.concat(n.routes)}else{e.__routes__=n.routes}e.main=n.main;if(!e.component&&n.main.length){e.component=n.main.pop()}}return e},__loadPlugins:function t(e,n){var o=e||[],r=null,s=[],i=[],a=null;switch(zn.type(e)){case"object":o=[e];break;case"function":o=e(this);break}if(o&&o.length){e.forEach(function(t){r=this.__loadPlugin(t,n);if(r){if(r.__routes__){s=s.concat(r.__routes__)}if(r.main){a=r.main;switch(zn.type(i)){case"string":a=r.routes[a]||zn.path(r.components,a)||zn.path(window,a);break;case"function":if(a.constructor.toString()=="function Function() { [native code] }"){a=a(this)}break;default:return}i.push(a)}}}.bind(this))}return{routes:s,main:i}},__loadPlugin:function t(e,n){var o=e||{},r=this.fire("pluginLoading",e,n);if(r===false){return}switch(zn.type(e)){case"object":o=o;break;case"function":o=o(this);break}if(o.namespace&&o.components){zn.path(window,o.namespace,o.components)}o.__routes__=this.formatRoutes(o.routes||[],n);return this.fire("pluginLoaded",o),o},__matchRouteAndRequest:function t(e,n){var o=e.paths,r=null,s={},i=[],a=false,u=null,p=n.path.split(this._pathSeparator);if(e.routes&&Object.keys(e.routes).length){if(e.exact==null){e.exact=false}}if(e.exact){if(e.path===n.path){return n.unmatchs=i,s}if(p.length!==o.length){return false}}for(var h=0,c=p.length;h<c;h++){u=p[h];if(!u){continue}r=o[h];a=true;if(!r){i.push(u);continue}if(!r.isParameter&&u!==r.key){return false}if(r.isParameter){s[r.key]=u}}if(!a){return false}return n.unmatchs=i,s},__parseRoutePaths:function t(e){var n=[],o=null,r=e.split(this._pathSeparator);for(var s=0,i=r.length;s<i;s++){o=r[s];if(!o){continue}if(/^:\w[\w\d]*$/.test(o)){o=o.replace(/^:/,"");n[s]={key:o,isParameter:true}}else{n[s]={key:o}}}return n}}})},function(t,e,n){var o=znui.React||n(0);t.exports=o.createClass({displayName:"Error404",render:function t(){return o.createElement("div",{className:znui.react.classname("zr-router-error-404",this.props.className),style:this.props.style},o.createElement("div",{className:"error-header"},o.createElement("h3",null,"ERROR: 404")),o.createElement("div",{className:"error-body"},"The path ",o.createElement("span",{className:"path"},this.props.request.path)," is not found."),o.createElement("div",{className:"error-footer"}))}})},function(t,e,n){var o=znui.React||n(0);var u=n(1);var r=o.createClass({displayName:"ZRRoute",__handler:function t(){var e=this.props.request,n=e.matcher,o={path:e.path.replace(this.props.route.path,""),search:e.search,event:e.event,matcher:n},r=this.props.route.__routes__,s=null,i=null;if(!r){var a=n.getRoutesFromRoute(this.props.route);r=a.routes;i=a.component}s=n.getRouteForRequest(o,r);if(s){return{Component:s.component||i,ComponentProps:zn.extend({},s.props,{application:this.props.application,parent:this,parentRequest:e,route:s,router:this.props.router,request:o})}}else{return{Component:u.Error404,ComponentProps:{application:this.props.application,parent:this,parentRequest:e,router:this.props.router,request:o}}}},__getComponent:function t(){return this.__handler()},render:function t(){if(this.props.request&&this.props.route&&this.props.route.routes){var e=this.__getComponent();return o.createElement("div",{className:znui.react.classname("zr-route",this.props.className),style:this.props.style},e.Component&&o.createElement(e.Component,e.ComponentProps))}else{return null}}});t.exports=r}]));